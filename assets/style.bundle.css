@font-face{font-family:"Noto Sans";src:url("fonts/NotoSans-Regular.woff2") format("woff2");font-weight:400;font-style:normal;font-display:swap;}@font-face{font-family:"Noto Sans";src:url("fonts/NotoSans-Italic.woff2") format("woff2");font-weight:400;font-style:italic;font-display:swap;}:root{--primitive-white:#ffffff;--primitive-paper-50:#fdfbf7;--primitive-paper-100:#f5f2eb;--primitive-paper-200:#eceae5;--primitive-paper-300:#eaddcf;--primitive-night-900:#1a1918;--primitive-night-800:#262423;--primitive-night-700:#383533;--primitive-night-600:#33302e;--primitive-night-500:#201e1d;--primitive-brown-950:#311f1c;--primitive-brown-900:#3e2723;--primitive-brown-800:#4d332d;--primitive-brown-700:#5d4037;--primitive-brown-600:#744225;--primitive-brown-500:#8b4513;--primitive-brown-400:#a0522d;--primitive-brown-300:#ae7e68;--primitive-brown-200:#bcaaa4;--primitive-brown-100:#d7ccc8;--primitive-brown-50:#ebe5e3;--primitive-brown-warm-50:#fdf6f3;--primitive-brown-warm-100:#fae9e2;--primitive-brown-warm-200:#f3d4c7;--primitive-brown-warm-300:#e9bda8;--primitive-brown-warm-400:#d29476;--primitive-brown-warm-500:#ba6b45;--primitive-brown-warm-600:#9e5332;--primitive-brown-warm-700:#824025;--primitive-brown-warm-800:#68321e;--primitive-brown-warm-900:#502618;--primitive-brown-warm-950:#38190f;--primitive-ink-950:#221b15;--primitive-ink-900:#2b221b;--primitive-ink-800:#433b35;--primitive-ink-700:#5c5550;--primitive-ink-600:#6a6662;--primitive-ink-500:#797775;--primitive-ink-400:#888888;--primitive-ink-300:#a4a4a4;--primitive-ink-200:#c0c0c0;--primitive-ink-100:#dcdcdc;--primitive-ink-50:#f9f9f9;--primitive-ivory-900:#ececec;--primitive-ivory-800:#dedede;--primitive-ivory-700:#d0d0d0;--primitive-ivory-600:#b0b0b0;--primitive-ivory-500:#a09c98;--primitive-ivory-400:#757575;--primitive-amber-50:#fff8e1;--primitive-amber-100:#ffecb3;--primitive-amber-200:#ffe082;--primitive-amber-300:#ffd54f;--primitive-amber-400:#ffca28;--primitive-amber-500:#ffc107;--primitive-amber-600:#ffb300;--primitive-amber-700:#ffa000;--primitive-amber-800:#ff8f00;--primitive-amber-900:#ff6f00;--text-scale:1;--sepia-val:0%;--primary-color:var(--primitive-brown-500);--primary-hover:var(--primitive-brown-400);--text-link:var(--primitive-brown-500);--bg-body:var(--primitive-paper-50);--bg-card:var(--primitive-white);--bg-drawer:var(--primitive-paper-100);--bg-hover:rgba(139,69,19,0.06);--bg-header-tabs:var(--primitive-ink-100);--text-main:var(--primitive-ink-900);--text-muted:var(--primitive-ink-700);--text-light:var(--primitive-ink-400);--text-pali:var(--primitive-ink-700);--text-eng:var(--primitive-ink-900);--border-color:var(--primitive-paper-300);--border-light:var(--primitive-paper-200);--shadow-soft:0 2px 10px rgba(62,39,35,0.05);--shadow-card:0 4px 15px rgba(62,39,35,0.08);--shadow-hover:0 12px 24px rgba(62,39,35,0.15);--highlight-color-background:rgba(139,69,19,0.08);--highlight-color-segment:rgba(255,167,38,0.15);--font-main:"Inter","Segoe UI",-apple-system,BlinkMacSystemFont,"Roboto","Helvetica Neue",sans-serif;--font-sutta:"Noto Sans","Segoe UI",sans-serif;--container-width:800px;--radius-md:8px;--radius-sm:4px;--z-popup:1000;--z-toast:2000;--radius-popup:12px;--popup-padding-y-mobile:20px;--popup-padding-x-mobile:16px;--popup-padding-mobile:var(--popup-padding-y-mobile) var(--popup-padding-x-mobile);--popup-padding-desktop:25px 30px;--tts-cached-color:#2e7d32;}[data-theme="dark"]{--bg-body:var(--primitive-night-900);--bg-card:var(--primitive-night-800);--bg-drawer:var(--primitive-night-500);--bg-hover:rgba(255,255,255,0.12);--bg-header-tabs:#000000;--text-main:var(--primitive-ivory-700);--text-muted:var(--primitive-ivory-500);--text-light:var(--primitive-ivory-400);--text-pali:var(--primitive-brown-300);--text-eng:var(--primitive-ivory-800);--text-link:var(--primitive-amber-800);--border-color:var(--primitive-night-700);--border-light:var(--primitive-night-600);--primary-color:var(--primitive-brown-400);--primary-hover:var(--primitive-brown-warm-500);--shadow-soft:0 4px 12px rgba(0,0,0,0.4);--shadow-card:0 6px 20px rgba(0,0,0,0.6);--shadow-hover:0 12px 30px rgba(0,0,0,0.8);--highlight-color-background:rgba(255,255,255,0.08);--highlight-color-segment:rgba(255,179,0,0.15);--tts-cached-color:#66bb6a;}*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;}html{font-size:calc(100% * var(--text-scale));height:100%;--sepia-val:0;--sepia-hue-coeff:-0.5;--sepia-saturate:1.1;transition:font-size 0.2s ease;overscroll-behavior-y:none;}#landing-view,#reader-view,.popup-container{filter:sepia(calc(var(--sepia-val) * 1%)) hue-rotate(calc(var(--sepia-val) * var(--sepia-hue-coeff) * 1deg)) saturate(var(--sepia-saturate));transition:filter 0.2s ease;}body{font-family:var(--font-main);background-color:var(--bg-body);color:var(--text-main);max-width:var(--container-width);min-height:100%;margin:0 auto;padding:0 20px 20px 20px;line-height:1.6;overscroll-behavior-y:none;}button{cursor:pointer;font-family:inherit;transition:all 0.2s ease;}a{color:var(--text-link);text-decoration:none;transition:color 0.2s ease;}a:hover{text-decoration:underline;opacity:0.9;}.hidden{display:none !important;}.static-fade-transition{transition:none !important;opacity:1;}.static-fade-out{opacity:1 !important;}#filter-drawer,#toh-menu{animation:none !important;}@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}@keyframes slideDown{from{opacity:0;transform:translateY(-10px);}to{opacity:1;transform:translateY(0);}}header{text-align:center;padding-bottom:10px;}#nav-header{display:flex;justify-content:space-between;align-items:center;margin-top:30px;gap:10px;width:100%;max-width:500px;margin-left:auto;margin-right:auto;margin-bottom:30px;animation:fadeIn 0.5s;}.nav-arrow{background:none;border:none;color:var(--primary-color);width:48px;height:48px;flex-shrink:0;display:flex;align-items:center;justify-content:center;padding:0;opacity:0.6;border-radius:50%;transition:background-color 0.2s,transform 0.2s;}.nav-arrow svg{width:28px;height:28px;display:block;}.nav-arrow:hover:not(:disabled){background-color:rgba(0,0,0,0.05);transform:none;opacity:1;}.nav-arrow:disabled{color:var(--text-light);cursor:default;opacity:0.2;}#nav-title-display{text-align:center;flex-grow:1;min-width:0;width:auto;min-height:3.5rem;padding:4px 8px;border-radius:var(--radius-md);cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;transition:background-color 0.2s;}#nav-title-display:hover{background-color:rgba(0,0,0,0.03);}#nav-title-text{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;line-height:1.3;}#nav-title-display #nav-title-text.hidden{display:flex !important;visibility:hidden;opacity:0;}#nav-main-title{display:block;font-weight:700;font-size:1.15rem;color:var(--text-main);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%;}#nav-sub-title{display:block;font-size:0.9rem;color:var(--text-muted);font-style:italic;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%;padding:0 5px;}#nav-search-container{display:flex;align-items:center;gap:5px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:90%;z-index:10;}#nav-title-display #nav-search-container.hidden{display:none !important;}#nav-sutta-input{width:100%;padding:0 10px;border:1px solid var(--primary-color);border-radius:var(--radius-sm);text-align:center;font-weight:bold;color:var(--primary-color);outline:none;font-size:16px;height:2rem;box-shadow:0 4px 10px rgba(0,0,0,0.1);background:white;}#nav-search-btn{background-color:var(--primary-color);color:white;border:none;border-radius:var(--radius-sm);padding:0 12px;height:2rem;font-size:1rem;cursor:pointer;box-shadow:0 4px 10px rgba(0,0,0,0.1);display:flex;align-items:center;justify-content:center;}:root{--tts-bottom-padding:120px;}header{transition:padding-top 0.3s cubic-bezier(0.25,0.46,0.45,0.94);}body.tts-open #reader-view > header{padding-top:var(--tts-bottom-padding);}@media (max-width:600px){body.tts-open #reader-view > header{padding-top:var(--tts-bottom-padding);}}#sutta-container{background:transparent;border-top:1px solid var(--border-color);box-shadow:none;padding:20px 40px 60px 40px;min-height:300px;transition:padding-bottom 0.3s cubic-bezier(0.25,0.46,0.45,0.94);}body.tts-open #sutta-container{}@media (max-width:600px){body{padding:0;}#sutta-container{padding:30px 20px 80px 20px;}body.tts-open #sutta-container{}}#filter-container{margin-bottom:15px;}.icon-trigger{background:transparent;border:none;color:var(--text-light);padding:5px 15px;opacity:0.2;display:inline-flex;justify-content:center;cursor:pointer;transition:all 0.2s ease;}.icon-trigger:hover,.icon-trigger.open{color:var(--primary-color);opacity:1;transform:scale(1.1);}.icon-trigger.open{transform:rotate(180deg);}.icon-trigger svg{width:20px;height:20px;}#filter-drawer{padding:15px;animation:slideDown 0.3s ease-out;position:relative;}@keyframes slideDown{from{opacity:0;transform:translateY(-10px);}to{opacity:1;transform:translateY(0);}}.hidden{display:none !important;}.filter-label{font-size:0.85em;color:var(--primary-color);margin-bottom:12px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;text-align:center;}.filter-row{display:flex;flex-wrap:wrap;justify-content:center;gap:8px;margin-bottom:10px;}#secondary-filters{margin-top:10px;}.filter-btn{background-color:var(--bg-card);color:var(--text-muted);border:1px solid var(--border-color);padding:6px 14px;font-size:0.9rem;border-radius:var(--radius-sm);font-weight:500;transition:all 0.2s ease;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;touch-action:pan-y;}.filter-btn:hover{background-color:var(--bg-hover);color:var(--primary-color);border-color:var(--primary-color);}.filter-btn.active{background-color:var(--primary-color);color:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.2);border-color:var(--primary-color);}.text-btn{background:none;border:none;color:var(--primary-color);font-size:0.85rem;text-decoration:underline;opacity:0.8;cursor:pointer;transition:opacity 0.2s;display:block;margin:0 auto;}.text-btn:hover{opacity:1;}#drawer-footer{margin-top:15px;padding:0 10px;background-color:var(--bg-drawer);border-radius:0 0 var(--radius-md) var(--radius-md);height:52px;display:grid;grid-template-columns:1fr auto 1fr;align-items:center;margin-left:-15px;margin-right:-15px;margin-bottom:-15px;}.zoom-widget{grid-column:1;display:flex;align-items:center;gap:4px;padding-left:5px;}.zoom-label{font-size:0.8rem;color:var(--text-muted);font-weight:600;user-select:none;padding:0 4px;}.icon-only-btn{background:transparent;border:none;color:var(--text-muted);width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background-color 0.2s,transform 0.1s;}#btn-update-offline.icon-only-btn{margin-right:-3px;}.icon-only-btn:hover{background-color:var(--bg-hover);color:var(--primary-color);}.icon-only-btn:active{transform:scale(0.9);background-color:var(--highlight-color-background);}.offline-widget{grid-column:2;display:flex;align-items:center;gap:4px;}.offline-main-btn{background:transparent;border:none;color:var(--text-muted);font-size:0.85rem;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:6px;padding:6px 8px;border-radius:4px;transition:all 0.2s;}#btn-download-offline .label{margin-right:0;}.offline-main-btn.offline-info{padding:6px 4px;color:var(--text-muted);font-weight:600;}.offline-main-btn.offline-info:hover{background-color:transparent;color:var(--primary-color);text-decoration:underline;}.offline-main-btn:hover:not(.offline-info){background-color:var(--bg-hover);color:var(--primary-color);}.offline-main-btn .icon{display:flex;align-items:center;justify-content:center;}.offline-main-btn .icon svg{width:16px;height:16px;display:block;}#btn-update-offline{color:var(--text-muted);}#btn-update-offline:hover{background-color:var(--bg-hover);}.theme-toggle-group{grid-column:3;justify-self:end;display:flex;align-items:center;padding-right:5px;position:relative;}#sepia-control-panel{position:absolute;top:100%;right:6px;width:30px;height:140px;background-color:var(--bg-card);border:1px solid var(--border-light);border-radius:20px;box-shadow:var(--shadow-soft);display:flex;align-items:center;justify-content:center;z-index:100;transform-origin:top center;animation:dropDownFade 0.2s cubic-bezier(0.175,0.885,0.32,1.275);}@keyframes dropDownFade{from{opacity:0;transform:translateY(-10px) scale(0.95);}to{opacity:1;transform:translateY(0) scale(1);}}#sepia-control-panel.hidden{display:none;}#sepia-slider{-webkit-appearance:none;appearance:none;width:110px;height:40px;background:transparent;transform:rotate(-90deg);cursor:pointer;touch-action:none;}#sepia-slider::-webkit-slider-runnable-track{width:100%;height:6px;background:var(--border-light);border-radius:3px;cursor:pointer;}#sepia-slider::-webkit-slider-thumb{-webkit-appearance:none;height:20px;width:20px;border-radius:50%;background:var(--primary-color);border:3px solid var(--bg-card);box-shadow:0 1px 4px rgba(0,0,0,0.3);margin-top:-7px;}#sepia-slider::-moz-range-track{width:100%;height:6px;background:var(--border-light);border-radius:3px;cursor:pointer;}#sepia-slider::-moz-range-thumb{height:20px;width:20px;border:3px solid var(--bg-card);border-radius:50%;background:var(--primary-color);box-shadow:0 1px 4px rgba(0,0,0,0.3);}#btn-theme-toggle{background:transparent;border:none;color:var(--text-muted);width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.3s ease;opacity:0.6;}#btn-theme-toggle:hover{background-color:transparent;color:var(--primary-color);opacity:1;transform:rotate(15deg);}.sepia-indicator{font-size:0.75rem;font-weight:600;color:var(--text-muted);background:transparent;border:none;padding:0 4px;border-radius:4px;margin-left:4px;cursor:pointer;width:38px;height:32px;flex-shrink:0;transition:all 0.2s ease;display:flex;align-items:center;justify-content:center;text-decoration:none !important;opacity:1;font-variant-numeric:tabular-nums;line-height:1;padding-bottom:2px;}.sepia-indicator:hover{background-color:var(--bg-hover);color:var(--text-muted);}.sepia-indicator.panel-open{color:var(--primary-color);background-color:var(--bg-hover);font-weight:700;}#drawer-footer.syncing .offline-main-btn{color:var(--primary-color);pointer-events:none;}#drawer-footer.syncing .icon svg{animation:spin 1s linear infinite;}#drawer-footer.syncing #btn-update-offline{display:none;}#drawer-footer.ready .offline-main-btn{}#drawer-footer.ready .offline-main-btn:hover{color:var(--primary-color);}#drawer-footer.ready #btn-update-offline{display:flex;}#drawer-footer.error .offline-main-btn{color:#d32f2f;}#drawer-footer.error #btn-update-offline{display:none;}@keyframes spin{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}#landing-view{position:fixed;top:0;left:0;width:100%;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:var(--bg-body);z-index:2000;padding:20px;text-align:center;opacity:1;transition:opacity 0.5s ease,transform 0.5s ease;}#landing-view.hidden{opacity:0;pointer-events:none;display:none;}.landing-content{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;max-width:600px;}.landing-title{font-family:var(--font-main);font-size:3rem;font-weight:800;color:var(--primary-color);margin-bottom:1rem;letter-spacing:-1px;}.landing-subtitle{font-family:var(--font-main);font-size:1.2rem;color:var(--text-light);margin-bottom:3rem;font-weight:400;}.landing-btn{display:inline-flex;align-items:center;gap:12px;background-color:var(--primary-color);color:white;font-size:1.2rem;font-weight:600;padding:16px 32px;border-radius:50px;border:none;cursor:pointer;transition:all 0.2s ease;box-shadow:0 4px 15px rgba(139,69,19,0.3);}.landing-btn:hover{background-color:var(--primary-hover);transform:translateY(-2px);box-shadow:0 6px 20px rgba(139,69,19,0.4);}.landing-btn:disabled{background-color:var(--text-muted);cursor:not-allowed;transform:none;box-shadow:none;}.landing-footer{padding-bottom:20px;font-size:0.85rem;color:var(--text-light);opacity:0.6;}[data-theme="dark"] .landing-title{color:var(--text-main);}@media (max-width:600px){.landing-title{font-size:2.2rem;}.landing-subtitle{font-size:1rem;}.landing-btn{width:100%;justify-content:center;}}button,.magic-btn{touch-action:manipulation;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}#btn-random{background-color:var(--primary-color);color:#fff;border:none;padding:12px 28px;font-size:1.1rem;font-weight:bold;border-radius:var(--radius-md);box-shadow:0 4px 6px rgba(139,69,19,0.2);}#btn-random:hover:not(:disabled){background-color:var(--primary-hover);transform:translateY(-2px);box-shadow:0 6px 8px rgba(139,69,19,0.25);}#btn-random:disabled{background-color:#ccc;cursor:not-allowed;box-shadow:none;transform:none;}.sutta-text-view{overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;max-width:100%;}.sutta-text-view ul{list-style-type:none;padding-left:0;margin:0;}.sutta-text-view header ul{display:none;}h1.sutta-title{text-align:center;color:var(--text-main);margin-bottom:30px;line-height:1.3;}@media (max-width:600px){h1.sutta-title{font-size:1.4rem;}}h1.sutta-title .pli{display:block;font-size:0.85em;color:var(--text-pali);font-weight:normal;}h1.sutta-title .pli.promoted,h2 .pli.promoted,h3 .pli.promoted,h4 .pli.promoted,h5 .pli.promoted,h6 .pli.promoted{font-size:1em;color:inherit;font-weight:inherit;font-style:normal;font-family:inherit;}.evam{font-variant:small-caps;font-weight:bold;color:var(--text-main);}p{margin-bottom:1.2em;}.segment{display:block;margin-bottom:2px;touch-action:manipulation;cursor:text;}.pli{font-family:var(--font-sutta);color:var(--text-pali);font-style:italic;font-size:0.95em;display:block;margin-bottom:2px;}.eng,.pli.promoted{font-family:var(--font-main);color:var(--text-main);font-weight:450;font-style:normal;line-height:1.5;margin-top:0;display:inline;}.endsutta,.endsegment,.endvagga,.endsection{text-align:center;margin-top:2rem;margin-bottom:1rem;color:var(--text-light);font-style:italic;font-weight:500;font-size:0.95rem;}.endsutta *,.endsegment *,.endvagga *{text-align:center;display:block;}.highlight,.highlight-container{border-left:4px solid var(--primary-color);padding-left:calc(1rem - 4px);margin-left:-1rem;background-color:var(--highlight-color-background);border-radius:0 4px 4px 0;transition:none !important;}.sutta-context-footer{margin-top:60px;padding-top:20px;border-top:1px none var(--border-light);display:flex;flex-direction:column;align-items:flex-end;text-align:right;}.ctx-label{font-size:0.8rem;color:var(--text-light);font-style:italic;margin-bottom:8px;opacity:0.8;}.ctx-link{background:none;border:none;padding:0;margin:0;cursor:pointer;display:flex;flex-direction:column;align-items:flex-end;}.ctx-link:hover{transform:translateX(-5px);opacity:0.9;}.ctx-acronym{font-family:var(--font-main);font-size:1rem;font-weight:700;color:var(--primary-color);line-height:1.2;}.ctx-title{font-family:var(--font-sutta);font-size:0.75rem;color:var(--text-main);margin-top:2px;}.comment-marker{color:var(--primary-color);font-weight:bold;vertical-align:super;font-size:0.75em;padding:10px 8px;margin:0 -4px;cursor:pointer;user-select:none;-webkit-user-select:none;touch-action:manipulation;position:relative;z-index:10;}.comment-marker:hover{color:var(--primary-hover);}.sutta-nav{position:relative;display:flex;justify-content:space-between;align-items:center;margin-top:50px;padding:20px 0;border-top:1px solid var(--border-light);min-height:60px;width:100%;}.sutta-nav button.nav-btn,.nav-spacer{flex:1;flex-basis:0;min-width:0;max-width:42%;position:relative;z-index:10;}.sutta-nav button.nav-btn{background:none;border:1px solid transparent;color:var(--primitive-brown-400);padding:8px 0;font-size:0.95rem;border-radius:var(--radius-sm);cursor:pointer;display:flex;flex-direction:column;justify-content:center;gap:4px;transition:color 0.2s ease,transform 0.2s ease;}.sutta-nav button.nav-btn:hover{background-color:transparent;border-color:transparent;color:var(--primitive-brown-warm-600);transform:translateY(-1px);}[data-theme="dark"] .sutta-nav button.nav-btn:hover{color:var(--primitive-brown-warm-400);text-shadow:none;}.nav-spacer{visibility:hidden;height:1px;}.nav-main-text{display:inline-flex;align-items:center;gap:6px;font-weight:600;line-height:1.2;text-align:inherit;}.nav-icon-inline{width:1.1em;height:1.1em;position:relative;top:1px;}.nav-title{display:block;font-size:0.8rem;color:var(--text-light);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%;line-height:1.2;text-align:inherit;transition:color 0.2s ease,opacity 0.2s ease;}.sutta-nav button.nav-btn:hover .nav-title{color:var(--primitive-ink-600);opacity:1;}[data-theme="dark"] .sutta-nav button.nav-btn:hover .nav-title{color:var(--primitive-ivory-800);}.nav-invisible-random{position:absolute;left:50%;top:0;bottom:0;transform:translateX(-50%);z-index:5;width:34%;height:100%;background:transparent;border:none;cursor:pointer;-webkit-tap-highlight-color:transparent;outline:none;}.branch-container{padding:0;}.branch-card-group,.branch-card-leaf{margin-bottom:15px;list-style:none;}.b-card-link{display:block;background-color:var(--bg-card);border:1px solid var(--border-light);border-radius:var(--radius-md);text-decoration:none;color:var(--text-main);box-shadow:var(--shadow-soft);overflow:hidden;position:relative;transform:translateZ(0);backface-visibility:hidden;}.b-card-link:hover{text-decoration:none;transform:scale(1.02);box-shadow:var(--shadow-hover);filter:brightness(1.02);z-index:1;}.branch-card-group .b-card-link{border-left:4px solid var(--primary-color);}.branch-card-leaf .b-card-link{border:1px solid var(--border-light);border-radius:12px;}.b-content{padding:15px 20px;display:flex;flex-direction:column;gap:8px;}@media (max-width:600px){.b-content{padding:12px 15px;}}.b-header{display:flex;flex-direction:column;}.b-title{font-size:1.1rem;font-weight:700;color:var(--text-main);line-height:1.3;}@media (max-width:600px){.b-title{font-size:1.05rem;}}.b-orig{font-size:0.9rem;color:var(--text-muted);font-style:italic;margin-top:2px;}.b-blurb{font-size:0.95rem;color:var(--text-muted);line-height:1.5;margin-top:5px;}@media (max-width:600px){.b-blurb{font-size:0.9rem;}}.b-footer{display:flex;justify-content:flex-end;margin-top:8px;padding-top:8px;border-top:1px dashed var(--border-light);}.b-badge{font-family:monospace;font-size:0.8rem;color:var(--text-light);background-color:var(--bg-body);padding:4px 8px;border-radius:4px;border:1px solid var(--border-light);white-space:nowrap;max-width:100%;overflow:hidden;text-overflow:ellipsis;}.branch-hero{text-align:center;margin-bottom:30px;padding-bottom:10px;max-width:700px;margin-left:auto;margin-right:auto;}.branch-hero-title{font-size:1.8rem;color:var(--primary-color);margin-bottom:5px;line-height:1.3;}.branch-hero-blurb{font-size:1rem;color:var(--text-main);line-height:1.6;margin-bottom:20px;background-color:transparent;padding:15px 20px;border-radius:8px;display:inline-block;text-align:left;}.branch-hero-divider{height:1px;background:linear-gradient(to right,transparent,var(--border-light),transparent);width:80%;margin:0 auto;}:root{--popup-comment-height:40vh;--popup-quicklook-top:70px;}.popup-container{position:fixed;left:50%;transform:translateX(-50%);width:100%;max-width:var(--container-width);background-color:var(--bg-card);display:flex;flex-direction:column;box-shadow:0 -5px 20px rgba(0,0,0,0.15);opacity:1;bottom:0 !important;border-radius:0;}.popup-container.hidden{opacity:0;transform:translate(-50%,100%);pointer-events:none;}.popup-body{position:relative;padding:var(--popup-padding-mobile);padding-bottom:calc(var(--popup-padding-y-mobile) + 30vh + env(safe-area-inset-bottom,20px));overflow-y:auto;overscroll-behavior:contain;touch-action:pan-y;flex:1;min-height:0;}@media all and (display-mode:standalone){.popup-body{padding-bottom:calc(var(--popup-padding-y-mobile) + 30vh + env(safe-area-inset-bottom,0px));}}@media (min-width:600px){.popup-body{padding:var(--popup-padding-desktop);padding-bottom:var(--popup-padding-desktop);}.popup-container{width:96%;bottom:0 !important;border-radius:0;}}#comment-popup{bottom:0;max-height:var(--popup-comment-height);height:var(--popup-comment-height);z-index:1020;transition:transform 0.3s cubic-bezier(0.25,0.46,0.45,0.94),opacity 0.3s;}#quicklook-popup{top:var(--popup-quicklook-top);bottom:0;height:auto;max-height:60vh;border-radius:0;border-bottom:none;z-index:1010;transition:transform 0.3s cubic-bezier(0.25,0.46,0.45,0.94),opacity 0.2s;}body.popup-open #quicklook-popup{bottom:var(--popup-comment-height) !important;top:auto;max-height:calc(100vh - var(--popup-comment-height) - var(--popup-quicklook-top));}#quicklook-popup.hidden{opacity:0;pointer-events:none;transform:translate(-50%,100%);}#comment-popup .popup-body{padding-bottom:calc(30vh + env(safe-area-inset-bottom,20px));}#quicklook-popup .popup-body{padding-bottom:80px !important;}body.popup-open,body.lookup-open{padding-bottom:45vh !important;transition:padding-bottom 0.3s ease;}.is-top-layer{z-index:2000 !important;}.header-close-btn{background:transparent;border:none;color:var(--text-muted);width:30px;height:30px;font-size:1.5rem;line-height:1;display:flex;align-items:center;justify-content:center;cursor:pointer;border-radius:50%;flex-shrink:0;}.header-close-btn:hover{color:var(--primary-color);background-color:var(--bg-hover);}.comment-header,.quicklook-header{padding:10px 15px;background-color:var(--bg-body);display:flex;justify-content:space-between;align-items:flex-start;gap:10px;min-height:50px;border-left:5px solid var(--primary-color);}.comment-header-text{flex:1;font-family:var(--font-sutta);font-size:0.9rem;font-style:italic;color:var(--text-muted);align-self:center;white-space:nowrap;overflow-x:auto;overflow-y:hidden;scrollbar-width:none;-ms-overflow-style:none;padding-right:5px;}.comment-header-text::-webkit-scrollbar{display:none;}#quicklook-title{display:flex;align-items:center;gap:8px;flex:1;min-width:0;}.ql-uid-badge{color:var(--text-main);font-family:var(--font-main);font-weight:300;font-size:0.95rem;white-space:nowrap;flex-shrink:0;letter-spacing:0.5px;}.ql-sutta-title{font-weight:600;font-size:0.95rem;color:var(--primary-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.ql-header-content{flex:1;display:flex;flex-direction:column;gap:2px;min-width:0;}.ql-context{font-family:var(--font-main);font-size:0.95rem;font-weight:600;color:var(--text-main);line-height:1.3;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;}.ql-ref{font-size:0.8rem;color:var(--text-light);font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-transform:uppercase;letter-spacing:0.5px;}.quicklook-footer{padding:10px 15px;background-color:var(--bg-body);display:flex;justify-content:space-between;align-items:center;gap:10px;min-height:50px;border-left:5px solid var(--primary-color);cursor:pointer;transition:background-color 0.2s;}.quicklook-footer:hover{background-color:var(--bg-hover);}.quicklook-footer .ql-title{}.popup-nav-bar{position:absolute;bottom:20px;right:20px;left:auto;width:auto;display:flex;align-items:center;gap:8px;padding:4px;background-color:transparent;border:none;border-radius:0;box-shadow:none;opacity:0.2;transition:opacity 0.2s ease;z-index:100;user-select:none;}.popup-nav-bar:hover,.popup-nav-bar:focus-within{opacity:1;}.popup-nav-info{display:none;}.popup-nav-btn{background-color:var(--bg-card);border:1px none var(--border-light);border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;color:var(--text-muted);cursor:pointer;position:relative;transition:background-color 0.2s,color 0.2s,transform 0.2s;box-shadow:0 2px 5px rgba(0,0,0,0.1);}.popup-nav-btn::after{content:'';position:absolute;top:-5px;bottom:-5px;left:-5px;right:-5px;background:transparent;}.popup-nav-btn:hover:not(:disabled){background-color:var(--bg-hover);color:var(--primary-color);transform:scale(1.1);border-color:var(--primary-color);}.popup-nav-btn:disabled{opacity:0.3;cursor:default;box-shadow:none;}@media (pointer:coarse){.popup-nav-bar{display:none !important;}}#toh-wrapper{position:fixed;top:15px;right:15px;z-index:1000;display:flex;flex-direction:column;align-items:flex-end;pointer-events:none;}#toh-fab,#toh-menu{pointer-events:auto;}#toh-fab{width:32px;height:32px;border-radius:50%;background-color:transparent;border:none;box-shadow:none;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.2s ease;opacity:0.3;color:var(--text-light);}#toh-fab:hover,#toh-fab.active{opacity:1;color:var(--primary-color);background-color:var(--bg-hover);transform:scale(1.1);}#toh-menu{margin-top:5px;background-color:var(--bg-card);border:1px solid var(--border-light);width:320px;max-height:70vh;border-radius:8px;box-shadow:var(--shadow-card);padding:15px;overflow-y:auto;overscroll-behavior:contain;animation:slideDown 0.2s ease-out;scrollbar-width:thin;scrollbar-color:var(--border-color) transparent;}#toh-menu::-webkit-scrollbar{width:6px;}#toh-menu::-webkit-scrollbar-thumb{background-color:var(--border-color);border-radius:10px;}#toh-menu::-webkit-scrollbar-thumb:hover{background-color:var(--text-light);}@media (max-width:600px){#toh-menu{width:280px;}}.toh-header{margin:0 0 10px 0;font-size:0.8rem;color:var(--text-light);border-bottom:1px solid var(--border-light);padding-bottom:4px;text-transform:uppercase;letter-spacing:1px;font-weight:600;}#toh-list{list-style:none;padding:0;margin:0;}.toh-item{margin-bottom:2px;}.toh-item-wrapper{display:flex;flex-direction:column;gap:2px;margin-left:-15px;margin-right:-15px;padding-top:4px;padding-bottom:4px;}.toh-header-row{display:flex;align-items:flex-start;justify-content:space-between;padding-right:15px;cursor:pointer;transition:background-color 0.1s ease;position:relative;min-height:28px;}.toh-header-row:hover{background-color:var(--bg-hover);}.toh-header-row.active{background-color:var(--highlight-color-background);}.toh-main-text{font-size:0.95rem;font-weight:600;color:var(--text-muted);line-height:1.4;flex:1;padding-top:2px;padding-bottom:2px;}.toh-header-row.active .toh-main-text{color:var(--primary-color);font-weight:700;}.toh-prefix{font-weight:700;color:var(--text-light);margin-right:6px;font-size:0.85em;}.toh-row-sub{font-size:0.85rem;color:var(--text-light);margin-top:2px;line-height:1.3;}.toh-sub-text{padding-top:4px;padding-bottom:4px;padding-right:15px;cursor:default;position:relative;font-size:0.9rem;color:var(--text-muted);line-height:1.4;}.toh-sub-text.clickable{cursor:pointer;}.toh-sub-text.clickable:hover{color:var(--primary-color);background-color:var(--bg-hover);}.toh-sub-text.active{color:var(--primary-color);background-color:var(--highlight-color-background);font-weight:500;}.toh-sub-text.disabled{opacity:0.6;cursor:not-allowed;}.toh-toggle-icon{width:24px;height:24px;display:flex;align-items:center;justify-content:center;color:var(--text-light);transition:transform 0.2s ease,color 0.2s;border-radius:4px;flex-shrink:0;margin-top:2px;}.toh-toggle-icon:hover{color:var(--primary-color);background-color:var(--bg-hover);}.toh-item-wrapper.collapsed .toh-toggle-icon svg{transform:rotate(-90deg);}.toh-children{display:block;}.toh-item-wrapper.collapsed .toh-children{display:none;}.toh-h1 .toh-header-row{padding-left:15px;background-color:var(--highlight-color-background);border-bottom:1px solid var(--bg-body);}.toh-h1 .toh-sub-text{padding-left:15px;}.toh-h2 .toh-header-row,.toh-h2 .toh-sub-text{padding-left:15px;}.toh-h3 .toh-header-row,.toh-h3 .toh-sub-text{padding-left:30px;}.toh-h4 .toh-header-row,.toh-h4 .toh-sub-text{padding-left:45px;}.toh-h5 .toh-header-row,.toh-h5 .toh-sub-text{padding-left:60px;}#toh-menu.toh-mode-paragraphs .toh-main-text{font-weight:400;font-size:0.9rem;color:var(--text-main);line-height:1.5;}#toh-menu.toh-mode-paragraphs .toh-prefix{font-weight:600;font-size:0.85rem;color:var(--text-light);margin-right:6px;}#toh-menu.toh-mode-paragraphs .toh-item-wrapper{padding-top:2px;padding-bottom:2px;}#toh-menu.toh-mode-paragraphs .toh-header-row.active .toh-main-text{font-weight:700;color:var(--primary-color);}#splash-screen{position:fixed;inset:0;background-color:var(--bg-body);z-index:9999;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:opacity 0.5s ease-out;}.splash-loader-box{width:200px;height:2px;background-color:var(--border-color);border-radius:2px;overflow:hidden;position:relative;}.splash-bar-fill{position:absolute;top:0;left:0;height:100%;width:100%;background-color:var(--primary-color);transform-origin:left;animation:indeterminate 1.5s infinite cubic-bezier(0.65,0.81,0.73,0.4);}.splash-text{margin-top:15px;color:var(--text-light);font-family:var(--font-main);font-size:0.8rem;font-weight:400;letter-spacing:1px;text-transform:uppercase;}@keyframes indeterminate{0%{left:-35%;right:100%;}60%{left:100%;right:-90%;}100%{left:100%;right:-90%;}}#global-progress-bar{position:fixed;top:0;left:0;height:3px;width:0%;background-color:var(--primary-color);z-index:2000;transition:width 0.2s linear,opacity 0.3s ease;opacity:0;box-shadow:0 1px 2px rgba(0,0,0,0.2);pointer-events:none;}#global-progress-bar.active{opacity:1;}#tts-player{position:fixed;top:0;left:50%;transform:translateX(-50%) translateY(-150px);width:auto;max-width:90%;min-width:300px;background-color:transparent;border:none;box-shadow:none;padding-top:env(safe-area-inset-top,20px);padding-bottom:0;display:flex;flex-direction:column;align-items:center;gap:8px;transition:opacity 0.3s ease,transform 0.3s ease,visibility 0.3s,gap 0.3s;z-index:2000;opacity:0;visibility:hidden;pointer-events:none;}#tts-player.active{transform:translateX(-50%) translateY(0);opacity:1;visibility:visible;pointer-events:auto;}body.popup-open #tts-player,#tts-player.settings-active{gap:0;}.tts-header-container{width:auto;display:flex;justify-content:center;pointer-events:none;}.tts-info{background-color:var(--bg-card);border:1px solid var(--border-light);box-shadow:0 2px 8px rgba(0,0,0,0.1);border-radius:20px;padding:4px 16px;text-align:center;font-family:monospace;font-size:0.75rem;font-weight:600;color:var(--text-muted);max-width:250px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;pointer-events:auto;transition:color 0.3s,background-color 0.3s,border-color 0.3s,opacity 0.3s,visibility 0.3s,transform 0.3s,max-height 0.3s,padding 0.3s,border-width 0.3s,margin 0.3s;max-height:40px;opacity:1;visibility:visible;transform:translateY(0);margin:0;border-width:1px;}body.popup-open .tts-info,#tts-player.settings-active .tts-info{opacity:0;visibility:hidden;pointer-events:none;transform:translateY(-10px);max-height:0;padding-top:0;padding-bottom:0;border-width:0;margin:0;}.tts-info.error-text{color:var(--primitive-amber-800);border-color:var(--primitive-amber-500);background-color:var(--primitive-amber-50);}.tts-controls-row{background-color:var(--bg-body);border:1px solid var(--border-light);box-shadow:0 8px 24px rgba(0,0,0,0.15);border-radius:50px;padding:6px 12px;display:flex;align-items:center;justify-content:space-between;gap:12px;pointer-events:auto;backdrop-filter:blur(10px);}[data-theme="dark"] .tts-controls-row{background-color:var(--primitive-night-800);border-color:var(--primitive-night-600);box-shadow:0 10px 30px rgba(0,0,0,0.5);}.tts-btn{background:transparent;border:none;color:var(--text-muted);width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background-color 0.2s,transform 0.2s,color 0.2s;flex-shrink:0;}.tts-btn:hover{background-color:var(--bg-hover);color:var(--primary-color);transform:scale(1.1);}.tts-icon-btn{background:none;border:none;padding:2px;color:var(--text-muted);cursor:pointer;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all 0.2s;opacity:0.6;}.tts-icon-btn:hover{color:var(--primary-color);background-color:var(--bg-hover);opacity:1;}.tts-btn-main{width:44px;height:44px;background-color:var(--primary-color);color:white;border-radius:50%;box-shadow:0 4px 10px rgba(139,69,19,0.3);margin:0 4px;}.tts-btn-main:hover{background-color:var(--primary-hover);color:white;transform:scale(1.05);box-shadow:0 6px 14px rgba(139,69,19,0.4);}#tts-settings-panel{position:absolute;top:100%;left:0;width:100%;background-color:var(--bg-card);border:1px solid var(--border-light);border-radius:16px;padding:16px;margin-top:12px;margin-bottom:0;box-shadow:var(--shadow-card);display:flex;flex-direction:column;user-select:none;-webkit-user-select:none;overscroll-behavior:contain;pointer-events:auto;animation:slideDown 0.2s ease-out;transform-origin:top center;}#tts-settings-panel.hidden{display:none;}#tts-settings-main{display:flex;flex-direction:column;gap:10px;}.tts-setting-row{display:flex;flex-direction:column;gap:8px;}.tts-setting-row label{font-size:0.75rem;color:var(--text-muted);font-weight:700;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px;}#tts-voice-select,#tts-engine-select,#tts-region-select{width:100%;padding:8px 10px;border-radius:8px;border:1px solid var(--border-color);background-color:var(--bg-body);color:var(--text-main);font-size:0.9rem;outline:none;-webkit-appearance:menulist;appearance:menulist;}#tts-voice-select:focus,#tts-engine-select:focus{border-color:var(--primary-color);}#tts-apikey-input{width:100%;padding:8px;border-radius:8px;border:1px solid var(--border-color);background-color:var(--bg-body);color:var(--text-main);font-size:0.9rem;}#tts-rate-range{width:100%;background:transparent;-webkit-appearance:none;appearance:none;margin:0;vertical-align:middle;cursor:grab;touch-action:none;}#tts-rate-range:active{cursor:grabbing;}#tts-rate-range::-webkit-slider-runnable-track{width:100%;height:4px;cursor:pointer;background:var(--border-light);border-radius:2px;}#tts-rate-range::-webkit-slider-thumb{-webkit-appearance:none;height:16px;width:16px;border-radius:50%;background:var(--primary-color);cursor:pointer;border:2px solid var(--bg-card);box-shadow:0 1px 3px rgba(0,0,0,0.3);margin-top:-6px;}.tts-toggle-wrapper{display:flex;align-items:center;justify-content:space-between;margin-bottom:4px;}.tts-toggle-label{font-size:0.85rem;color:var(--text-main);font-weight:600;cursor:pointer;}.tts-switch{position:relative;display:inline-block;width:40px;height:22px;}.tts-switch input{opacity:0;width:0;height:0;}.tts-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:var(--border-light);transition:.3s;border-radius:34px;}.tts-slider:before{position:absolute;content:"";height:16px;width:16px;left:3px;bottom:3px;background-color:white;transition:.3s;border-radius:50%;box-shadow:0 1px 2px rgba(0,0,0,0.2);}input:checked + .tts-slider{background-color:var(--primary-color);}input:checked + .tts-slider:before{transform:translateX(18px);}@keyframes slideDown{from{opacity:0;transform:translateY(-10px) scale(0.95);}to{opacity:1;transform:translateY(0) scale(1);}}body.tts-open{padding-bottom:45vh !important;transition:padding-bottom 0.3s ease;}.sutta-text-view{padding-left:24px;}.segment,p,h1,h2,h3,h4,h5,h6,blockquote,.paragraph-block,li{position:relative;}.tts-marker{position:absolute;left:-24px;top:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10;background:none;border:none;padding:0;margin:0;outline:none;-webkit-tap-highlight-color:transparent;opacity:0.3;transition:opacity 0.2s,transform 0.2s;}.tts-marker::before{content:'';display:block;width:6px;height:6px;background-color:var(--primary-color);border-radius:50%;transition:transform 0.2s,background-color 0.2s,box-shadow 0.2s;}body:not(.tts-open) .tts-marker{display:none;}.tts-marker.cached::before{background-color:var(--tts-cached-color);box-shadow:0 0 0 1px var(--tts-cached-color);}.tts-marker.partial::before{background-color:var(--primitive-amber-500);box-shadow:0 0 0 1px var(--primitive-amber-500);}.tts-marker:hover,.tts-marker:active{opacity:1;}.tts-marker:hover::before{transform:scale(1.5);}.tts-active .tts-marker{opacity:1;}.tts-active .tts-marker::before{background-color:var(--primary-color);transform:scale(1.4);box-shadow:0 0 8px var(--primary-color);}.tts-active .tts-marker.cached::before{background-color:var(--tts-cached-color);box-shadow:0 0 8px var(--tts-cached-color);}.tts-active .tts-marker.partial::before{background-color:var(--primitive-amber-500);box-shadow:0 0 8px var(--primitive-amber-500);}.segment.tts-active,:not(.segment).tts-active{background-color:rgba(139,69,19,0.05);border-right:4px solid var(--primary-color);border-radius:8px 0 0 8px;padding-right:12px;margin-right:-12px;transition:all 0.2s ease;position:relative;z-index:1;}[data-theme="dark"] .segment.tts-active,[data-theme="dark"]:not(.segment).tts-active{background-color:rgba(255,255,255,0.05);}.sutta-text-view li .tts-marker{left:-48px;}@media (max-width:400px){.sutta-text-view li .tts-marker{left:-42px;}}#magic-tts-trigger{position:fixed;bottom:calc(5px + env(safe-area-inset-bottom));right:15px;width:50px;height:50px;z-index:1090;background:transparent;border:none;cursor:pointer;outline:none;-webkit-tap-highlight-color:transparent;}body.popup-open #magic-tts-trigger{display:none !important;}body.lookup-open #magic-tts-trigger{display:none !important;}#magic-nav-wrapper{position:fixed;top:10px;left:10px;z-index:1100;display:flex;align-items:center;gap:8px;padding:6px;border-radius:30px;transition:none;background-color:transparent;width:auto;max-width:calc(100vw - 20px);}#magic-nav-wrapper::before{content:'';position:absolute;top:-10px;left:-10px;right:-5px;bottom:-5px;z-index:-1;cursor:pointer;}#magic-nav-wrapper.collapsed{width:44px;height:44px;background-color:transparent;border:1px solid transparent;box-shadow:none;cursor:pointer;padding:0;justify-content:center;}#magic-nav-wrapper.collapsed #magic-group{display:none;}#magic-nav-wrapper:not(.collapsed){background-color:var(--bg-card);box-shadow:var(--shadow-soft);border:1px solid var(--border-light);opacity:1;padding:6px 8px 6px 12px;}#magic-nav-wrapper:not(.collapsed) #magic-group{display:flex;align-items:center;gap:8px;animation:none;flex:1;min-width:0;overflow:hidden;}#magic-breadcrumb-wrapper{display:flex;align-items:center;flex:1;min-width:0;overflow:hidden;}#magic-breadcrumb-bar{display:flex;align-items:center;overflow-x:auto;white-space:nowrap;scrollbar-width:none;-ms-overflow-style:none;padding:0 0 0 15px;user-select:none;-webkit-user-select:none;cursor:grab;flex-grow:1;max-width:100%;mask-image:linear-gradient(to right,transparent,black 15px,black 100%);-webkit-mask-image:linear-gradient(to right,transparent,black 15px,black 100%);}#magic-breadcrumb-bar:active{cursor:grabbing;}#magic-breadcrumb-bar > *{flex-shrink:0;}#magic-bc-end{display:inline-block;min-width:20px;height:1px;opacity:0;pointer-events:none;}@media (min-width:600px){#magic-bc-end{min-width:10px;}}#magic-breadcrumb-bar::-webkit-scrollbar{display:none;}#magic-backdrop{position:fixed;inset:0;background:transparent;backdrop-filter:none;z-index:1099;}#magic-backdrop.hidden{display:none;}.magic-btn{width:32px;height:32px;flex-shrink:0;display:flex;align-items:center;justify-content:center;border-radius:50%;border:1px solid transparent;background-color:transparent;color:var(--text-light);cursor:pointer;-webkit-tap-highlight-color:transparent;transition:all 0.2s ease;}.magic-btn:hover{background-color:rgba(0,0,0,0.05);color:var(--primary-color);}.magic-btn.active{background-color:var(--bg-card);color:var(--primary-color);}#magic-nav-corner{margin-right:2px;pointer-events:auto;}#magic-nav-wrapper.collapsed #magic-nav-corner{display:none;}#magic-nav-wrapper:not(.collapsed) #magic-nav-corner{display:flex;}#btn-magic-breadcrumb svg{transition:transform 0.2s cubic-bezier(0.4,0,0.2,1);}#btn-magic-breadcrumb.open svg{transform:rotate(180deg);}#magic-breadcrumb-bar{position:static;height:32px;background-color:var(--bg-card);border:1px solid var(--border-light);border-radius:20px;display:flex;align-items:center;white-space:nowrap;overflow:hidden;width:0;opacity:0;padding:0;border-width:0;margin-left:0;transition:all 0.3s cubic-bezier(0.25,0.46,0.45,0.94);}#magic-breadcrumb-bar.expanded{width:auto;min-width:50px;padding-left:15px;padding-right:15px;margin-left:5px;opacity:1;box-shadow:var(--shadow-soft);}#magic-breadcrumb-bar ol{list-style:none;margin:0;padding:0;display:flex;font-size:0.85rem;color:var(--text-light);}#magic-breadcrumb-bar .bc-sep{margin:0 6px;color:#ddd;font-size:0.8em;}#magic-breadcrumb-bar .bc-link{background:none;border:none;color:var(--text-muted);cursor:pointer;padding:0;font-weight:400;}#magic-breadcrumb-bar .bc-link:hover{color:var(--primary-color);text-decoration:underline;}#magic-breadcrumb-bar .bc-item.active{font-weight:600;color:var(--text-main);}#magic-breadcrumb-bar .bc-link.bc-root-marker,#magic-breadcrumb-bar .bc-item.active.bc-root-marker{color:var(--primary-color);font-weight:500;}.bc-sep-mini{display:inline-block;margin:0 4px;color:var(--text-light);opacity:0.7;font-weight:normal;}#magic-toc-drawer{position:fixed;top:55px;left:15px;width:320px;max-height:70vh;background-color:var(--bg-card);border-radius:8px;box-shadow:0 5px 20px rgba(0,0,0,0.1);overflow-y:auto;overscroll-behavior:contain;z-index:1101;opacity:0;transform:translateY(-10px);pointer-events:none;transition:opacity 0.2s ease,transform 0.2s ease;scrollbar-width:thin;}#magic-toc-drawer.open{opacity:1;transform:translateY(0);pointer-events:auto;}#magic-toc-content{padding:8px 0;}#magic-toc-drawer::-webkit-scrollbar{width:6px;}#magic-toc-drawer::-webkit-scrollbar-track{background:transparent;}#magic-toc-drawer::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,0.2);border-radius:10px;}.toc-node-wrapper{display:block;}.toc-header-row{display:flex;align-items:stretch;padding-right:5px;border-bottom:1px solid var(--border-light);background-color:transparent;position:relative;transition:background-color 0.1s ease;}.toc-header-row:hover{background-color:var(--bg-hover);}.toc-header-row.active{background-color:var(--highlight-color-background);}.toc-header-row.active::before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background-color:var(--primary-color);z-index:1;}.toc-header{flex:1;padding-top:10px;padding-bottom:5px;padding-right:10px;font-size:0.75rem;font-weight:700;color:var(--text-light);text-transform:uppercase;letter-spacing:0.5px;line-height:1.3;cursor:default;}.toc-header.clickable{cursor:pointer;}.toc-header.clickable:hover{color:var(--primary-color);}.toc-header-row.active .toc-header{color:var(--text-main);}.toc-toggle-icon{width:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--text-light);flex-shrink:0;transition:transform 0.3s ease;}.toc-toggle-icon:hover{color:var(--primary-color);}.toc-node-wrapper.collapsed .toc-toggle-icon svg{transform:rotate(-90deg);}.toc-leaf-presentation{display:flex;flex-direction:column;gap:2px;padding-top:8px !important;padding-bottom:8px !important;padding-right:10px;text-transform:none !important;letter-spacing:normal !important;font-size:1rem !important;font-weight:normal !important;line-height:normal !important;color:inherit;}.toc-item{padding-top:8px;padding-bottom:8px;padding-right:10px;cursor:pointer;transition:background 0.1s;position:relative;}.toc-item:hover{background-color:var(--bg-hover);}.toc-item.active{background-color:var(--highlight-color-background);}.toc-item.active::before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background-color:var(--primary-color);}.toc-header.toc-leaf-presentation{flex:1;}.toc-row-main{font-size:0.95rem;font-weight:700;color:var(--text-main);line-height:1.2;}.toc-item.active .toc-row-main,.toc-header-row.active .toc-row-main{color:var(--primary-color);}.toc-row-sub{font-size:0.8rem;color:var(--text-muted);line-height:1.2;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;}.toc-item.subleaf{padding-top:4px;padding-bottom:4px;border-bottom:none;}.toc-item.subleaf .toc-subleaf-label{font-size:0.85rem;color:var(--text-light);}.toc-item.subleaf.active .toc-subleaf-label{color:var(--primary-color);font-weight:600;}.toc-item.subleaf.active::before{width:3px;opacity:0.6;}.toc-children{display:block;}.toc-node-wrapper.collapsed > .toc-children{display:none;}.error-message{text-align:center;padding:40px 20px;border-radius:8px;border:none;background-color:var(--bg-card);}.sc-link{display:inline-block;margin-top:10px;padding:10px 20px;background-color:var(--primary-color);color:white;text-decoration:none;border-radius:20px;font-weight:600;}.sc-link:hover{background-color:var(--primary-color);color:white;transform:translateY(-2px);box-shadow:var(--shadow-soft);text-decoration:none;}#lookup-popup{position:fixed;left:50%;transform:translateX(-50%);width:100%;max-width:var(--container-width);bottom:0 !important;max-height:var(--popup-comment-height);height:var(--popup-comment-height);z-index:1030;transition:transform 0.3s cubic-bezier(0.25,0.46,0.45,0.94);display:flex;flex-direction:column;background-color:var(--bg-body);border-radius:20px 20px 0 0;box-shadow:0 -5px 20px rgba(0,0,0,0.15);}#lookup-popup.hidden{transform:translate(-50%,100%);pointer-events:none;opacity:0;}@media (min-width:600px){#lookup-popup{width:96%;bottom:0 !important;border-radius:20px 20px 0 0;}}#lookup-popup .popup-body{padding-bottom:calc(40vh + env(safe-area-inset-bottom));flex:1;overflow-y:auto;position:relative;display:flex;flex-direction:column;overscroll-behavior:contain;}.lookup-best-matches{margin-bottom:8px;display:flex;flex-direction:column;gap:4px;}.lookup-best-matches.hidden{display:none;}.best-match-label{font-size:0.75rem;text-transform:uppercase;color:var(--text-muted);font-weight:600;letter-spacing:0.5px;margin-bottom:2px;}.best-match-item{background-color:var(--bg-secondary);border-left:3px solid var(--primary-color);padding:8px 12px;border-radius:4px;font-size:1rem;color:var(--text-main);cursor:pointer;}.best-match-phrase u{text-decoration:underline;text-decoration-color:var(--primary-color);text-decoration-thickness:2px;text-underline-offset:3px;font-weight:600;}.best-match-meaning{display:block;font-size:0.85rem;color:var(--text-light);margin-top:4px;font-style:italic;}.lookup-heading-row{display:flex;align-items:center;justify-content:space-between;padding-bottom:8px;margin-bottom:8px;border-bottom:1px solid var(--border-light);flex-shrink:0;gap:12px;}#lookup-word-heading{margin:0;font-size:clamp(1.2rem,8vw,2rem);font-weight:200;color:var(--text-main);font-family:var(--font-main);line-height:1.2;overflow-wrap:break-word;word-break:break-word;}.lookup-gnote-trigger{background-color:var(--bg-drawer);color:var( --text-muted);border:1px none transparent;border-radius:12px;padding:4px 12px;font-size:0.8rem;font-weight:600;cursor:pointer;transition:all 0.2s ease;white-space:nowrap;}.lookup-gnote-trigger:hover{background-color:var(--bg-hover);color:var(--primary-color);border-color:none;}.lookup-gnote-trigger.active{background-color:var(--primary-color);color:#fff;border-color:none;}.lookup-gnote-trigger.disabled{opacity:0.3;cursor:default;pointer-events:none;background-color:none;}.lookup-gnote-section{margin-bottom:8px;background-color:var(--bg-secondary);border-radius:8px;padding:8px;}.lookup-gnote-section.hidden{display:none;}.lookup-main-content{flex:1;}.lookup-header-tabs{display:flex;align-items:flex-end;background-color:var(--bg-header-tabs);padding:4px 8px;position:relative;}.lookup-tab{padding:6px 16px;margin-right:2px;background-color:transparent;border-radius:8px;cursor:pointer;font-size:0.8rem;color:var(--text-muted);user-select:none;position:relative;font-family:var(--font-main);font-weight:400;border:none;}.lookup-tab:hover{background-color:var(--bg-hover);color:var(--text-main);}.lookup-tab.active{background-color:var(--bg-body);color:var(--primary-color);font-weight:450;box-shadow:0 -4px 6px -4px rgba(0,0,0,0.1);z-index:10;}.lookup-header-tabs .header-close-btn{margin-left:auto;background:none;border:none;font-size:1.5rem;color:var(--text-muted);cursor:pointer;padding:0 8px;margin-right:0px;line-height:1;align-self:center;margin-bottom:4px;}.lookup-header-tabs .header-close-btn:hover{color:var(--text-color);}.lookup-tab-content{display:none;padding-top:16px;}.lookup-tab-content.active{display:block;}#lookup-title{text-transform:none;}.lookup-highlight{background-color:var(--highlight-color-segment,rgba(255,215,0,0.3));border-radius:2px;box-shadow:0 0 0 1px var(--highlight-color-segment,rgba(255,215,0,0.3));}.dpd-result{font-family:var(--font-main);color:var(--text-color);line-height:1.6;margin-bottom:16px;padding-bottom:16px;border-bottom:1px solid var(--border-light);}.dpd-result:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0;}.dpd-summary{cursor:pointer;list-style:none;position:relative;min-height:24px;display:block;}.dpd-summary::-webkit-details-marker{display:none;}.dpd-summary-content{display:flex;flex-direction:column;gap:4px;}.has-details .dpd-summary-content{padding-right:24px;}.dpd-detail-icon{position:absolute;bottom:0px;right:6px;width:14px;height:14px;display:flex;align-items:center;justify-content:center;opacity:0.4;transition:opacity 0.2s,background-color 0.2s,color 0.2s,border-color 0.2s;border-radius:50%;color:var(--text-light);font-size:10px;font-family:var(--font-mono,monospace);font-weight:700;line-height:1;flex-shrink:0;}.dpd-detail-icon::after{content:'i';display:block;margin-top:-1px;}.dpd-summary:hover .dpd-detail-icon{opacity:1;border-color:var(--text-muted);color:var(--text-muted);}details[open] .dpd-detail-icon{opacity:1;background-color:var(--primary-color);border-color:var(--primary-color);color:#fff;}.no-details .dpd-summary{cursor:default;}.dpd-summary-line-1{display:flex;justify-content:space-between;align-items:baseline;width:100%;gap:8px;}.dpd-lemma{font-weight:500;color:var(--primary-color);font-size:clamp(1rem,5vw,1.5rem);overflow-wrap:break-word;word-break:break-word;min-width:0;}.dpd-pos-group{text-align:right;font-size:clamp(0.75rem,3.5vw,0.9em);flex-shrink:0;}.dpd-pos{font-style:italic;color:var(--text-muted);font-size:0.85rem;}.dpd-plus-case{color:var(--text-light);font-size:0.9em;margin-right:4px;}.dpd-summary-line-2{font-size:0.85em;color:var(--text-light);font-family:var(--font-mono,monospace);line-height:1.4;margin-top:2px;}.dpd-construction{display:flex;flex-wrap:wrap;align-items:center;width:100%;}.dpd-construction:before{content:'[';margin-right:2px;opacity:0.7;}.dpd-construction:after{content:']';margin-left:2px;opacity:0.7;}.dpd-construction-item{white-space:nowrap;}.dpd-construction-item:not(:last-child):after{content:'|';color:var(--text-light);opacity:0.5;margin:0 6px;font-weight:300;font-size:0.9em;}.dpd-summary-line-3{display:block;font-size:0.95em;line-height:1.4;color:var(--text-main);margin-top:4px;}.dpd-meaning{font-weight:500;font-size:clamp(0.9rem,4vw,1rem);}.dpd-meaning-segment{white-space:normal;display:inline-block;}.dpd-meaning-lit{color:var(--text-light);font-size:0.9em;font-style:italic;display:block;margin-top:4px;margin-left:0;}.dpd-degree{opacity:0.15;font-size:0.75em;margin-left:8px;white-space:nowrap;}.dpd-details-content{margin-top:12px;padding-top:12px;border-top:1px dashed var(--border-light);}.dpd-grammar-table{width:100%;border-collapse:collapse;margin:12px 0;font-size:0.85em;background-color:transparent;border-radius:0;}.dpd-grammar-table td,.dpd-grammar-table th{padding:6px 0;border-bottom:1px none var(--border-light);vertical-align:middle;}.dpd-grammar-table th{text-align:right;padding-right:16px;width:33%;color:var(--text-light);font-weight:300;font-size:0.75rem;text-transform:lowercase;letter-spacing:0.5px;border-right:1px solid transparent;}.dpd-grammar-table td{text-align:left;color:var(--text-main);font-weight:300;width:65%;}.grammar-note-table th{text-align:left;background-color:var(--bg-secondary);padding:4px 12px;font-weight:600;text-transform:none;width:auto;font-size:clamp(0.75rem,2.5vw,0.9em);white-space:nowrap;}.grammar-note-table td{padding:4px 12px;font-size:clamp(0.7rem,2.5vw,0.85em);}.grammar-note-container{text-align:center;}.grammar-note-table{width:auto;max-width:100%;margin:8px auto;border-collapse:collapse;background-color:transparent;border-radius:8px;border:1px none var(--border-light);overflow:hidden;}.dpd-examples{margin-top:16px;}.example-heading{font-size:0.85em;text-transform:uppercase;letter-spacing:1px;color:var(--text-muted);margin-bottom:8px;font-weight:600;display:none;}.example-box{background-color:var(--bg-secondary);padding:6px 12px 0px 12px;border-radius:8px;margin-bottom:5px;border-left:none;}.example-text{font-style:italic;margin-bottom:6px;margin-top:6px;font-size:0.9rem;}.example-source{text-align:right;font-size:0.8em;color:var(--text-light);font-family:monospace;}.dpd-deconstruction{text-align:left;padding:8px 0 0 0;}.decon-key{font-weight:700;color:var(--primary-color);font-size:1.1em;}.dpd-deconstruction .dpd-summary-line-1{display:none;}.dpd-deconstruction-table{margin:0 auto;border-collapse:collapse;font-family:var(--font-mono,monospace);font-size:1rem;color:var(--primitive-blue-600);}.dpd-deconstruction-table td{padding:4px 8px;border:none;white-space:nowrap;}.decon-plus{color:var(--text-light);font-weight:normal;text-align:center;width:1em;opacity:0.7;}.decon-cell{text-align:center;}.dpd-deconstruction-table tr td:first-child{text-align:right;}.dpd-deconstruction-table tr td:last-child{text-align:left;}.dpd-inflection-info{color:var(--primary-color);font-size:0.75rem;font-weight:500;text-transform:lowercase;display:flex;flex-wrap:wrap;align-items:center;margin-bottom:2px;opacity:0.9;line-height:1.5;}.inflection-group{display:flex;flex-wrap:wrap;align-items:center;width:100%;}.group-label{font-weight:400;margin-right:8px;color:var(--text-muted);opacity:0.8;}.dpd-inflection-item{white-space:nowrap;}.dpd-inflection-item:not(:last-child):after{content:'|';color:var(--text-light);opacity:0.5;font-weight:300;margin:0 8px;font-size:0.9em;}.inflection-main{}.inflection-count{color:var(--text-light);opacity:0.8;font-size:0.9em;margin-left:2px;}.dpd-separator-dot{color:var(--text-light);margin:0 8px;opacity:0.6;}.dpd-group-header{font-size:1em;text-transform:uppercase;color:var(--text-muted);font-weight:200;margin:16px 0 8px 0;letter-spacing:0.5px;border-bottom:1px solid var(--border-light);padding-bottom:4px;}.dpd-matched-key{color:var(--text-main);opacity:0.9;margin-right:8px;}.dpd-matched-key b{color:var(--primary-color);}.stem-pattern-info{color:var(--text-light);font-size:0.75em;font-weight:400;white-space:nowrap;opacity:0.8;display:block;width:100%;margin-bottom:2px;}