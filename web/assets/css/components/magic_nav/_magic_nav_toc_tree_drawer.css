/* Path: web/assets/css/components/magic_nav/_magic_nav_toc_tree_drawer.css */

/* --- 1. DRAWER CONTAINER --- */
#magic-toc-drawer {
    position: fixed;
    top: 55px; left: 15px; width: 320px; max-height: 70vh;
    background-color: var(--bg-card);
    border-radius: 8px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    overflow-y: auto;
    z-index: 1101;
    opacity: 0; transform: translateY(-10px); pointer-events: none;
    transition: opacity 0.2s ease, transform 0.2s ease;
    scrollbar-width: thin;
}
#magic-toc-drawer.open { opacity: 1; transform: translateY(0); pointer-events: auto; }
#magic-toc-content { padding: 8px 0; }

/* Scrollbar */
#magic-toc-drawer::-webkit-scrollbar { width: 6px; }
#magic-toc-drawer::-webkit-scrollbar-track { background: transparent; }
#magic-toc-drawer::-webkit-scrollbar-thumb { background-color: rgba(0,0,0,0.2); border-radius: 10px; }


/* --- 2. NODE WRAPPER (COLLAPSIBLE) --- */
.toc-node-wrapper { display: block; }

.toc-header-row {
    display: flex;
    align-items: stretch; /* Để header và icon cao bằng nhau */
    padding-right: 5px;
    border-bottom: 1px solid rgba(0,0,0,0.03);
    background-color: transparent;
}
.toc-header-row:hover { background-color: rgba(0,0,0,0.03); }

/* Toggle Icon */
.toc-toggle-icon {
    width: 32px;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; color: var(--text-light);
    transition: transform 0.3s ease, color 0.2s;
    flex-shrink: 0;
}
.toc-toggle-icon:hover { color: var(--primary-color); }
.toc-node-wrapper.collapsed .toc-toggle-icon svg { transform: rotate(-90deg); } /* Đóng: Quay trái */
/* Mặc định mở: Mũi tên trỏ xuống (không rotate) */


/* --- 3. HEADER TYPES (Inside Row) --- */
.toc-header {
    flex: 1;
    padding-top: 8px; padding-bottom: 8px; padding-right: 10px;
    cursor: default;
}
.toc-header.clickable { cursor: pointer; }

/* A. BRANCH HEADER (Vagga/Chapter) - Style cũ */
.toc-header.type-branch .toc-branch-label {
    font-size: 0.75rem; font-weight: 700; color: var(--text-light);
    text-transform: uppercase; letter-spacing: 0.5px;
    line-height: 1.3;
}

/* B. LEAF HEADER (Leaf Container - AN 2.1-10) - Style mới giống Item */
.toc-header.type-leaf {
    padding-top: 8px; padding-bottom: 8px; /* Khớp với toc-item.leaf */
}
/* Active State cho Header */
.toc-header.active {
    background-color: var(--highlight-color-background);
    /* Border left cho Header nằm ở chính nó */
    border-left: 3px solid var(--primary-color);
    padding-left: calc(var(--padding-left) - 3px); /* Bù trừ border */
}


/* --- 4. ITEM TYPES (Leaf/Subleaf) --- */
.toc-item {
    padding-top: 8px; padding-bottom: 8px; padding-right: 10px;
    border-bottom: 1px solid rgba(0,0,0,0.03);
    cursor: pointer; transition: background 0.1s;
    position: relative;
}
.toc-item:hover { background-color: rgba(0,0,0,0.03); }

.toc-item.active { background-color: var(--highlight-color-background); }
/* Border left cho Item dùng ::before để sát mép container */
.toc-item.active::before {
    content: ""; position: absolute; left: 0; top: 0; bottom: 0; width: 4px;
    background-color: var(--primary-color);
}


/* --- 5. TEXT CONTENT STYLING (Shared) --- */

/* [LEAF STYLE] Acronym Đậm + Title Nhạt (Dùng cho cả Item Leaf và Header Leaf) */
.toc-row-main {
    font-size: 0.95rem; 
    font-weight: 600; /* [REQ] Đậm rõ ràng */
    color: var(--text-main); 
    line-height: 1.2;
}
.toc-row-sub {
    font-size: 0.8rem; 
    color: var(--text-muted); 
    line-height: 1.2;
    margin-top: 2px;
    font-style: normal;
    /* Cắt bớt nếu quá dài */
    display: -webkit-box; -webkit-line-clamp: 2; line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
}

/* [SUBLEAF STYLE] Low Profile */
.toc-subleaf-label {
    font-size: 0.85rem;
    color: var(--text-muted);
    font-weight: 400;
}
/* Subleaf Active: Đậm hơn, màu cam */
.toc-item.subleaf.active .toc-subleaf-label {
    color: var(--primary-color);
    font-weight: 600;
}


/* --- 6. CHILDREN CONTAINER --- */
.toc-children { display: block; }
.toc-node-wrapper.collapsed > .toc-children { display: none; }