<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Sutta Reader</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }

        /* Header & Controls */
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #ddd;
        }

        h1 { margin: 0 0 10px 0; color: #8b4513; }
        
        button {
            background-color: #8b4513;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            transition: background 0.3s;
        }

        button:hover { background-color: #a0522d; }

        /* Sutta Content Styling */
        #sutta-container {
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            min-height: 300px;
        }

        /* Bilara Data Styles */
        .pli {
            color: #777;
            font-style: italic;
            font-size: 0.9em;
            display: block; /* Pali on separate line */
            margin-bottom: 2px;
        }

        .eng {
            color: #222;
            font-weight: 500;
            display: block; /* English on separate line */
            margin-bottom: 12px;
        }

        /* Comment Tooltip */
        .comment-marker {
            color: #d35400;
            font-weight: bold;
            cursor: help;
            font-size: 0.8em;
            vertical-align: super;
            margin-left: 4px;
        }

        /* Headings inside Sutta */
        h1.sutta-title {
            text-align: center;
            font-size: 1.8em;
            color: #2c3e50;
        }
        
        .evam {
            font-variant: small-caps;
            font-weight: bold;
        }

        /* Paragraph grouping */
        p { margin-bottom: 15px; }

    </style>
</head>
<body>

    <header>
        <h1>‚ò∏Ô∏è Random Sutta</h1>
        <p>A simple reader for Bilara texts</p>
        <button onclick="loadRandomSutta()">üé≤ Randomize Sutta</button>
        <div id="status" style="margin-top: 10px; color: #666; font-size: 0.9em;"></div>
    </header>

    <main id="sutta-container">
        <p style="text-align: center; color: #999;">Click the button to load a sutta.</p>
    </main>

    <script src="data/sutta_db.js"></script>

    <script>
        // 1. Check Data Loaded
        const container = document.getElementById('sutta-container');
        const statusDiv = document.getElementById('status');
        let suttaKeys = [];

        if (typeof SUTTA_DB !== 'undefined') {
            suttaKeys = Object.keys(SUTTA_DB);
            statusDiv.textContent = `Library loaded: ${suttaKeys.length} suttas available.`;
        } else {
            statusDiv.textContent = "‚ö†Ô∏è Error: data/sutta_db.js not found or empty.";
            statusDiv.style.color = "red";
        }

        // 2. Random Logic
        function loadRandomSutta() {
            if (suttaKeys.length === 0) {
                alert("No data available to display.");
                return;
            }

            // Pick random ID
            const randomIndex = Math.floor(Math.random() * suttaKeys.length);
            const suttaId = suttaKeys[randomIndex];
            const content = SUTTA_DB[suttaId];

            // Render
            // We use specific ID for styling target if needed, but for now just innerHTML
            container.innerHTML = content;
            
            // Update status
            statusDiv.textContent = `Displaying: ${suttaId.toUpperCase()} (1 of ${suttaKeys.length})`;
            
            // Scroll to top
            window.scrollTo(0, 0);
        }
    </script>
</body>
</html>